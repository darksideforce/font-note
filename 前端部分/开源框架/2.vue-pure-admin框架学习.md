## 一：目录结构
vue-pure-admin的目录结构有一些我不需要使用的便被我删除了，主要关注一些可能常用或者经常修改的
整体目录
```
├── 目录
│   ├── .github             git配置文件   
│   ├── .husky              代码提交前校验
│   ├── build               构建工具
│   ├── locales             国际化文件存放处
│   ├── mock                模拟数据
│   ├── public              静态资源，存放一些用于配置整个网页信息的资源
│   ├──
│   ├── src                 
│   ├── types               全局ts类型配置
│   ├── .browserslistrc     配置游览器环境     
│   ├── .env                环境变量
│   ├── .env.development    开发环境变量
│   ├── .env.production     生产环境变量
│   ├── .env.staging        预发布环境变量
```
--- 

src目录下：
```
├── src
│   ├── api           接口
│   ├── assts         静态文件
│   ├── components    组件
│   ├── config        全局配置
│   ├── directives    自定义指令
│   ├── layout        布局
│   ├── plugins       处理库和插件
│   ├── router        路由
│   ├── store         pinia
│   ├── style         全局样式
│   ├── utils         全局方法
│   ├── views         页面
```


## 二：如何处理环境变量
该框架中的环境变量由于使用了ts，所以配置环境变量不是简单的在对应的env文件里写好就行。我们可以观察一下如何使用。
简单来说就是
通过vite自带的一个loadEnv方法来读取根目录下的env文件来进行配置。并交给viteconfigjs来进行读取使用。
loadEnv方法会接受一个参数（development或production）来读取指定的env文件
如果有需要加上的缺省配置，则在build文件内通过一个方法加上
1：对应的env文件内声明好指定的环境变量
```json
# 平台本地运行端口号
VITE_PORT = 8848
# 是否隐藏首页 隐藏 true 不隐藏 false （勿删除，VITE_HIDE_HOME只需在.env文件配置）
VITE_HIDE_HOME = false
```
2：在build文件中集中处理所有的打包信息以及环境变量等
每次打包自动写入app信息以及打包时间
```ts
const __APP_INFO__ = {
  pkg: { name, version, engines, dependencies, devDependencies },
  lastBuildTime: dayjs(new Date()).format("YYYY-MM-DD HH:mm:ss")
};
```

设置别名
```ts
const alias: Record<string, string> = {
  "@": pathResolve("../src"),
  "@build": pathResolve()
};
```

修改环境变量加上默认的环境变量，并把变量注册到全局。以及转换格式为方便处理的对象类型
```ts
const wrapperEnv = (envConf: Recordable): ViteEnv => {
  // 默认值
  const ret: ViteEnv = {
    VITE_PORT: 8848,
    VITE_PUBLIC_PATH: "",
    VITE_ROUTER_HISTORY: "",
    VITE_CDN: false,
    VITE_HIDE_HOME: "false",
    VITE_COMPRESSION: "none"
  };
  for (const envName of Object.keys(envConf)) {
    let realName = envConf[envName].replace(/\\n/g, "\n");
    realName =
      realName === "true" ? true : realName === "false" ? false : realName;
    if (envName === "VITE_PORT") {
      realName = Number(realName);
    }
    ret[envName] = realName;
    if (typeof realName === "string") {
      process.env[envName] = realName;
    } else if (typeof realName === "object") {
      process.env[envName] = JSON.stringify(realName);
    }
  }
  return ret;
};
```
在这一步还有一些类型需要处理

```ts
//比如在`type/global.d.ts`文件中有针对env进行声明
  interface ViteEnv {
    VITE_PORT: number;
    VITE_PUBLIC_PATH: string;
    VITE_ROUTER_HISTORY: string;
    VITE_CDN: boolean;
    VITE_HIDE_HOME: string;
    VITE_COMPRESSION: ViteCompression;
  }
 //以及build/utils文件中也有声明
   const ret: ViteEnv = {
    VITE_PORT: 8848,
    VITE_PUBLIC_PATH: "",
    VITE_ROUTER_HISTORY: "",
    VITE_CDN: false,
    VITE_HIDE_HOME: "false",
    VITE_COMPRESSION: "none"

  };
```
这意味着如果我们需要新增一些变量则需要在这里进行额外声明




---

既然数据已经转换为我们需要的格式，并且其他一些包名等信息都已经拿到了，现在就需要在打包时进行使用了。目光转换到vite.config.js文件
